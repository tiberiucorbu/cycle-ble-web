<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#3367D6">
    <!-- icon in the highest resolution we need it for -->
    <link rel="icon" sizes="128x128" href="./images/icon-128.png">
    <link rel="icon" sizes="512x512" href="./images/icon-512.png">

    <!-- reuse same icon for Safari -->
    <link rel="apple-touch-icon" href="./images/icon-128.png">

    <!-- multiple icons for IE -->
    <meta name="msapplication-square512x512logo" content="./images/icon-512.png">

    <link rel="manifest" href="/manifest.json">
    <title>Web Component Demo</title>
    <script src="./dist/es-next/polyfills.js"></script>
    <script src="./dist/modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <style>
        body, html {
            width: 100%;
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>
<body>
<noscript>
    Sorry, this page requires javascript in oder for it to work
</noscript>
<my-element>&nbsp;</my-element>
<my-typed-lit-element mood="working"></my-typed-lit-element>
<script>
    // Internet Explorer 6-11
    const isIE = /*@cc_on!@*/false || !!document.documentMode;

    function loadScript(scriptUrl) {
        const script = document.createElement('script');
        script.setAttribute('src', scriptUrl);
        document.head.appendChild(script);
        return script;
    }

    function loadScriptAsync(scriptUrl) {
        const script = document.createElement('script');
        script.setAttribute('src', scriptUrl);
        script.setAttribute('async', "async");
        document.head.appendChild(script);
        return script;
    }

    if (isIE) {
        const es5AddapterScript = '/dist/modules/@webcomponents/webcomponentsjs/custom-elements-es5-adapter.js';
        const polyfillScript = '/dist/modules/@babel/polyfill/dist/polyfill.js';
        loadScript(polyfillScript);
        loadScript(es5AddapterScript);
    }

    if (isIE) {
        loadScriptAsync('/dist/es5/bundle.js');
    } else {
        loadScriptAsync('/dist/es-next/bundle.js');
    }
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function () {
            navigator.serviceWorker.register('/dist/es-next/service-worker.js', {scope: '/'}).then(function (registration) {
                // Registration was successful
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            }, function (err) {
                // registration failed :(
                console.log('ServiceWorker registration failed: ', err);
            });
        });
    }
</script>
</body>
</html>
